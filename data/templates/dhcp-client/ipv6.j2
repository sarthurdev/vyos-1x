### Autogenerated by interface.py ###

# man https://www.unix.com/man-page/debian/5/dhcpcd.conf
allowedinterfaces {{ ifname }}

ipv6only
noipv6rs
noup

{% if dhcpv6_options.duid is vyos_defined %}
    clientid {{ dhcpv6_options.duid }}
    duid
{% endif %} %}

{% if address is vyos_defined and 'dhcpv6' in address %}
    require domain-name-servers
    require domain-name

{%     if dhcpv6_options.parameters_only is vyos_defined %}
    inform6
{%     endif %}
{%     if dhcpv6_options.temporary is not vyos_defined %}
    ia_na 0
{%     endif %}
{%     if dhcpv6_options.rapid_commit is vyos_defined %}
    option rapid_commit
{%     endif %}
{% endif %}

{% if dhcpv6_options.pd is vyos_defined %}
{%     for pd, pd_config in dhcpv6_options.pd.items() %}
{%         set sla_len = 64 - pd_config.length | int %}
{%         set ns = namespace(count=0, interfaces=[]) %}
{%         if pd_config.interface is vyos_defined %}
{%             for interface, interface_config in pd_config.interface.items() if pd_config.interface is vyos_defined %}
{%                 set iface = [interface] %}
{%                 if interface_config.sla_id is vyos_defined %}
{{                     iface.append(interface_config.sla_id) }}
{%                 else %}
{{                     iface.append(ns.count) }}
{%                 endif %}
{{                 iface.append(sla_len) }}
{%                 if interface_config.address is vyos_defined %}
{{                     iface.append(interface_config.address) }}
{%                 endif %}
{%                 set ns.count = ns.count + 1 %}
{{                 ns.interfaces.append(iface | join("/")) }}
{%             endfor %}
{%         endif %}
    ia_pd {{ pd }}/::/{{ pd_config.length }} {{ ns.interfaces | join(" ") }}
{%     endfor %}
{% endif %}
